<!DOCTYPE html>

	<head>
	  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
   
      <title>Build a Real Time Chat App with Node.js</title>
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:site" content="@tryenlight" />
      <meta name="twitter:title" content="Build a Real Time Chat App with Node.js" />
      <meta name="twitter:description" content="Use technologies like Node.js, Socket.io, and Express to create your own form of communication!" />
      <meta name="twitter:image" content="https://enlight.ml/enlight-logo.png" />
   

   <title>Real Time Chat App</title>

      <meta name="description" content="Use technologies like Node.js, Socket.io, and Express to create your own form of communication!">
      <meta name="viewport" content="width=device-width, initial-scale=1">
      <meta property="og:title" content="Real Time Chat App">
      <meta property="og:description" content="Use technologies like Node.js, Socket.io, and Express to create your own form of communication!">
      <meta property="og:url" content="https://enlight.ml/nodejs-chat">
      <meta property="og:image" content="https://enlight.ml/enlight-logo.png" /> 
      <meta name="twitter:card" content="summary" />
      <meta name="twitter:site" content="@tryenlight" />
      <meta name="twitter:title" content="Real Time Chat App" />
      <meta name="twitter:description" content="Use technologies like Node.js, Socket.io, and Express to create your own form of communication!" />
      <meta name="twitter:image" content="https://enlight.ml/enlight-logo.png" />

      <script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js"></script>

      <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/tachyons/4.7.0/tachyons.min.css" />
      <link href="https://enlight.ml/style.css?1501901046381226000" rel="stylesheet">
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/latest/css/font-awesome.min.css" />
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.css" />
      <script src="//twemoji.maxcdn.com/2/twemoji.min.js?2.3.0"></script>

      <script>
         (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
         (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
         m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
         })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
         
         ga('create', 'UA-85620206-1', 'auto');
         ga('send', 'pageview');
      </script>
	</head>


	<header>
	<nav class="db dt-l tc tl-l w-100 border-box pa3 ph5-l ba b--black-10 ">
  <div class="gradient">
    <a class="f2 fw3 dib pa2 no-underline black" href="/">
	    <img src="enlight.png" width="30" class="grow" style="border-radius: 2px;">  Enlight 
    </a>
  </div>
  <div class="db dtc-l v-mid w-100 w-75-l tc tr-l fw5">
    <a class="link f5 dib mr3 mr4-l black hover-blue" href="/#projects">Projects</a>
    <a class="link f5 dib mr3 mr4-l black hover-blue" href="/guide">Guide</a>
    <a class="link f5 dib mr3 mr4-l black hover-blue" href="/ml">Machine Learning</a>
    <a class="link f5 dib mr3 mr4-l black hover-blue" href="/web">Web Development</a>
    <a class="link f5 dib mr3 mr4-l black hover-blue" href="/nodejs">Node.js</a>
    <a class="link f5 dib mr3 mr4-l black hover-blue" href="/about">About</a>
  </div>
</nav>
	</header>


	<body>

	 <article class="dt w-100 project-red tc">
<div class="mw5 mw6-ns center pt3">
  <script async type="text/javascript" src="//cdn.carbonads.com/carbon.js?zoneid=1673&serve=C6AILKT&placement=enlightml" id="_carbonads_js"></script>

</div>
  <div class="dtc v-mid tc white ph3 ph4-l pt6">
    <h1 class="f1 f-subheadline-l fw6 tc">Build a <span class="underline">Real Time Chat App</span></h1>
    <a href="https://enlight-chat-nodejs.herokuapp.com/"><img class="project-image" src="/img/nodejs-chat.gif"></a><br><br>
    <a href="https://github.com/samayshamdasani/enlight/tree/gh-pages/demo/node-js/chat" class="f4 link dim ba ph3 pv2 mb2 dib white">Source</a>
    <a href="https://enlight-chat-nodejs.herokuapp.com/" class="f4 link dim ba ph3 pv2 mb2 dib white">Demo</a>
    <h3 class="f4 tc">By <u><a class="link white" href="https://shamdasani.org">Samay Shamdasani</a></u></h3>
  </div>
</article>

<div class="center measure-wide f4 pv5 lh-copy ph2 content">
  <a href="https://twitter.com/share" class="twitter-share-button" data-show-count="false" data-size="large">Tweet</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>

  <h3 id="getting-started">Getting started</h3>

<p>Building a chat app is pretty complex. However, with a framework like Node.js, and libraries like Socket.io and Express, a basic chat app is achievable with just a couple lines of code. Using Node.js, we can write JavaScript for the server, and with Socket.io and Express, we can make use of websockets to push messages to users from the server in real-time.</p>

<p>We’re going to be creating a <a href="https://nodejs.org/en/">Node.js</a> app, so make sure you have it installed.</p>

<p>To start:</p>
<ul>
  <li>create a folder</li>
  <li>cd into that directory in your terminal (command line)</li>
  <li>run <code class="highlighter-rouge">npm init</code> . The will create a new <code class="highlighter-rouge">package.json</code> file. (it will ask you name/version, etc.)</li>
  <li>install our dependencies by running:
    <ul>
      <li><code class="highlighter-rouge">npm install --save express</code> // a web framework for node</li>
      <li><code class="highlighter-rouge">npm install --save socket.io</code> // real-time module for our app</li>
    </ul>
  </li>
</ul>

<h3 id="file-structure">File structure</h3>

<p>Now that our dependencies are installed, let’s create our file structure:</p>
<ul>
  <li>add a <code class="highlighter-rouge">server.js</code> file</li>
  <li>create a folder named <code class="highlighter-rouge">public</code> with the following files:
    <ul>
      <li><code class="highlighter-rouge">index.html</code></li>
      <li><code class="highlighter-rouge">style.css</code></li>
      <li><code class="highlighter-rouge">client.js</code></li>
    </ul>
  </li>
</ul>

<h3 id="setting-up-the-server">Setting up the server</h3>

<p>Open up the <code class="highlighter-rouge">server.js</code> file. Here’s where we need to require <a href="http://expressjs.com/">express</a> and <a href="http://socket.io/">socket.io</a>, and create a new server. We also need to use <a href="http://expressjs.com/en/4x/api.html#app.get">app.get</a> to deliver an HTML file easily. In addition, we have to let express know that all our static (html,css,js) files are in the public folder. Lastly, we need to open up a port on our <code class="highlighter-rouge">localhost</code> hostname.</p>

<pre class="prettyprint">
  var express = require('express');
  var app = express();
  var server = require('http').createServer(app);
  var io = require('socket.io')(server);

  app.get('/', function(req, res, next) {
  	res.sendFile(__dirname + '/public/index.html')
  });

  app.use(express.static('public'));

  server.listen(7777);

</pre>

<p>Now, open your <code class="highlighter-rouge">index.html</code> file in the public folder. In there, we’ll need to create a normal HTML document with the following:</p>
<ul>
  <li>link our CSS file</li>
  <li>create a <code class="highlighter-rouge">form</code> with two inputs
    <ul>
      <li>one for the message (with an id), other for the submit button</li>
    </ul>
  </li>
  <li>create a <code class="highlighter-rouge">ul</code> with an id for the messages to go in</li>
  <li>link JQuery for our client side JavaScript</li>
  <li>link <code class="highlighter-rouge">/socket.io/socket.io.js</code></li>
  <li>link <code class="highlighter-rouge">client.js</code></li>
</ul>

<pre class="prettyprint"><xmp>
 <html>  
    <head>
      <title> Real Time Chat </title>
      <meta name="viewport" content="width=device-width, initial-scale=1" />
      <link rel="stylesheet" href="style.css" />
    </head>
    <body>
        <h1> Chat! </h1>
        <form>
            <input id="message" type="text" placeholder="message" />
            <input type="submit" value="Send" />
        </form>

        <ul id="thread"></ul>

        <script src="https://code.jquery.com/jquery-3.1.1.min.js"></script>

        <script src="/socket.io/socket.io.js"></script>

        <script src="client.js"></script>  
    </body>
 </html>  
</xmp></pre>

<p>Now, if you <code class="highlighter-rouge">cd</code> into the file on your terminal, run <code class="highlighter-rouge">node server.js</code>, and headover to <code class="highlighter-rouge">localhost:7777</code> in your browser, you should see your HTML file being served.</p>

<h3 id="interacting-with-the-server">Interacting with the server</h3>

<p>Open up your <code class="highlighter-rouge">client.js</code> file. At this point, we need to connect to our server using <a href="http://socket.io/docs/">io.connect</a>.
On connect, let’s emit a message to confirm our connection with an event of <code class="highlighter-rouge">join</code>.</p>

<pre class="prettyprint">
  var socket = io.connect('http://localhost:7777');
  socket.on('connect', function(data) {
      socket.emit('join', 'Hello server from client');
  });
</pre>

<p>Then, we can open back up our <code class="highlighter-rouge">server.js</code> file and log a message that the client is connected. Also, we can listen for the <code class="highlighter-rouge">join</code> event we wrote earlier to log the data from the client. Here’s how it’ll work:</p>

<pre class="prettyprint">
  var express = require('express');
  var app = express();
  var server = require('http').createServer(app);
  var io = require('socket.io')(server);

  app.get('/', function(req, res, next) {
  	res.sendFile(__dirname + '/public/index.html')
  });

  app.use(express.static('public'));


  io.on('connection', function(client) {
  	console.log('Client connected...');

  	client.on('join', function(data) {
  		console.log(data);
  	});
  });

  server.listen(7777);
</pre>

<p>Now, if you re-run the server.js file in your terminal (CTRL+C to exit) and refresh <code class="highlighter-rouge">localhost:7777</code> in your browser, you should see the messages <code class="highlighter-rouge">client connected...</code> &amp; <code class="highlighter-rouge">Hello server from client</code> in your terminal which confirms our connection!</p>

<h3 id="making-the-chat-app-work">Making the chat app work</h3>

<p>Finally! Now that we have a connection, we can use it to emit and send messages. Here’s what we need to do in our 	<code class="highlighter-rouge">client.js</code> file:</p>
<ul>
  <li>listen for an event (<code class="highlighter-rouge">thread</code>) that will recieve any messages emitted by ther server</li>
  <li>use the JQuery .submit() function to
    <ul>
      <li>emit the message from our <code class="highlighter-rouge">message</code> id (in our input)</li>
      <li>reset the form</li>
      <li>use <code class="highlighter-rouge">return false;</code> to prevent the from from it’s default action (refreshing page)</li>
    </ul>
  </li>
</ul>

<pre class="prettyprint">
  // initializing socket, connection to server
  var socket = io.connect('http://localhost:7777');
  socket.on('connect', function(data) {
      socket.emit('join', 'Hello server from client');
  });


  // listener for 'thread' event, which updates messages
  <xmp>socket.on('thread', function(data) {
    $('#thread').append('<li>' + data + '</li>');
  });</xmp>

  // sends message to server, resets &amp; prevents default form action
  $('form').submit(function() {
  	var message = $('#message').val();
  	socket.emit('messages', message);
  	this.reset();
  	return false;
  }); 
</pre>

<p>However, before we have a functional application, we have to add our <code class="highlighter-rouge">messages</code> event to our server and emit it to our thread event!</p>

<pre class="prettyprint">
  var express = require('express');
  var app = express();
  var server = require('http').createServer(app);
  var io = require('socket.io')(server);

  app.get('/', function(req, res, next) {
  	res.sendFile(__dirname + '/public/index.html')
  });

  app.use(express.static('public'));


  io.on('connection', function(client) {
  	console.log('Client connected...');

  	client.on('join', function(data) {
  		console.log(data);
  	});

  	client.on('messages', function(data){
  		client.emit('thread', data);
  		client.broadcast.emit('thread', data);
  	});
  });

  server.listen(7777);
</pre>

<p>There you go! Our <code class="highlighter-rouge">messages</code> event is listened for and once to server recieves it it is broadcasted to all the other clients using <code class="highlighter-rouge">client.broadcast.emit</code>.</p>

<h3 id="styling-the-app">Styling the app</h3>

<p>Before we finish, let’s style the app a bit. Open up the <code class="highlighter-rouge">style.css</code> file and customize it to your liking!</p>

<pre class="prettyprint">
  html, body {
    text-align: center;
    font-family: 'Avenir Next', 'Helvetica', 'Arial', sans-serif;
  }

  html,body,li,form,ul {
    padding: 0;
    margin: 0;
  }

  form {
    padding-bottom: 2%;
  }

  li {
    list-style: none;
    width: 100vw;
  }

  li:nth-child(odd) { 
    background: #eee; 
  }

</pre>

<p>Well, now you have a basic form of communication! If you open up multiple tabs, you’ll see the messages are being sent in real-time! Have fun :)</p>


</div>
<div class="w-50-l center f4 pv5 lh-copy ph2 content bt">
<div id="disqus_thread"></div>
<script>
    /**
     *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
     *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables
     */
    /*
    var disqus_config = function () {
        this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
        this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
    };
    */
    (function() {  // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        
        s.src = 'https://enlight-2.disqus.com/embed.js';
        
        s.setAttribute('data-timestamp', +new Date());
        (d.head || d.body).appendChild(s);
    })();
</script>
<noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript" rel="nofollow">comments powered by Disqus.</a></noscript>
</div>


	<footer class="pa4 pa5-l black-70 bt b--black-10">
  <section class="cf mb5">
    <div class="mb4 mb0-ns fl w-100 w-50-l" >
      <p class="f4 fw6 mb2 f6 mt0">
        Join over <b class="f5">1,000</b> other developers who get the latest projects sent directly to their inbox!
      </p>
      <form method="post" action="//enlight.us11.list-manage.com/subscribe/post?u=c28720fd0200ee7eef0e3e9ec&amp;id=1905fa696f" id="mc-embedded-subscribe-form" name="mc-embedded-subscribe-form" target="_blank" novalidate>
	      <input placeholder="Email Address" value="" name="EMAIL" id="mce-EMAIL" type="email" class= "mw-100 w-80 w5-ns f5 input-reset ba b--black-20 pv3 ph4 border-box">
	      <input type="submit" class="input-reset w-50 w-auto-ns bg-black-80 white f5 pv2 pv3-ns ph4 ba b--black-80 dim">
      </form>
    </div>
  </section>
  <div class="dt dt--fixed w-100" >
    <div class="dn dtc-ns v-mid">

      <p class="f7 black-70 dib pr3 mb3">
      © Enlight 2017
      </p>
    </div>
    <div class="db dtc-ns black-70 tc tr-ns v-mid">
      <a href="https://twitter.com/tryenlight" class="twitter-follow-button" data-size="large" data-show-count="false">Follow @tryenlight</a><script async src="//platform.twitter.com/widgets.js" charset="utf-8"></script>
      <a class="link near-black hover-silver dib mh3 tc" href="https://github.com/samayshamdasani/enlight" title="GitHub">
    <svg class="dib h2 w2" fill="currentColor" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 16 16" fill-rule="evenodd" clip-rule="evenodd" stroke-linejoin="round" stroke-miterlimit="1.414"><path d="M8 0C3.58 0 0 3.582 0 8c0 3.535 2.292 6.533 5.47 7.59.4.075.547-.172.547-.385 0-.19-.007-.693-.01-1.36-2.226.483-2.695-1.073-2.695-1.073-.364-.924-.89-1.17-.89-1.17-.725-.496.056-.486.056-.486.803.056 1.225.824 1.225.824.714 1.223 1.873.87 2.33.665.072-.517.278-.87.507-1.07-1.777-.2-3.644-.888-3.644-3.953 0-.873.31-1.587.823-2.147-.083-.202-.358-1.015.077-2.117 0 0 .672-.215 2.2.82.638-.178 1.323-.266 2.003-.27.68.004 1.364.092 2.003.27 1.527-1.035 2.198-.82 2.198-.82.437 1.102.163 1.915.08 2.117.513.56.823 1.274.823 2.147 0 3.073-1.87 3.75-3.653 3.947.287.246.543.735.543 1.48 0 1.07-.01 1.933-.01 2.195 0 .215.144.463.55.385C13.71 14.53 16 11.534 16 8c0-4.418-3.582-8-8-8"/></svg>
  </a>
    </div>
  </div>
  <div class="db dn-ns">
    <p class="f7 black-70 mt4 tc">
      © Enlight 2017 
    </p>
  </div>
</footer>



	<script src="/js/editor.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/nprogress/0.2.0/nprogress.js"></script>
<script type="text/javascript"> 
   NProgress.configure({ 
   	showSpinner: true
    });
   NProgress.start();   
   NProgress.done();
</script>



	</body>
</html>